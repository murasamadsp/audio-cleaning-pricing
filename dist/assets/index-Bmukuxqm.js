(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const S=["https://api.exchangerate-api.com/v4/latest/USD","https://open.er-api.com/v6/latest/USD"],P=18e5,R=37,w=.85,C={baseFee:10,formula:"hyperbolic",paramA:.03,paramB:5e-4},B={hyperbolic:{name:"Ð“Ñ–Ð¿ÐµÑ€Ð±Ð¾Ð»Ð°",equation:"A / (1 + B Ã— x)",calculate:(e,t,a)=>t/(1+a*e),params:{A:{min:.005,max:.2,default:.03,step:.001},B:{min:1e-4,max:.002,default:5e-4,step:1e-5}}},power:{name:"Ð¡Ñ‚ÐµÐ¿ÐµÐ½ÐµÐ²Ð° Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ",equation:"A Ã— x^(-B)",calculate:(e,t,a)=>e>0?t*Math.pow(e,-a):t,params:{A:{min:.5,max:5,default:2,step:.1},B:{min:.3,max:1.2,default:.6,step:.01}}},logarithmic:{name:"Ð›Ð¾Ð³Ð°Ñ€Ð¸Ñ„Ð¼Ñ–Ñ‡Ð½Ð°",equation:"A - B Ã— ln(x)",calculate:(e,t,a)=>e>0?Math.max(.005,t-a*Math.log(e)):t,params:{A:{min:.02,max:.15,default:.08,step:.005},B:{min:.002,max:.02,default:.008,step:.001}}}};let s=500,A="UAH",u="hyperbolic",m=10,p=.03,f=5e-4,i=null,h=R,E=w,F=null,b=null;const I=document.getElementById("minutesSlider"),U=document.getElementById("minutesDisplay"),$=document.getElementById("totalPrice"),T=document.getElementById("baseFeeDisplay"),k=document.getElementById("processingCost"),M=document.getElementById("rateDisplay"),H=document.getElementById("avgDisplay"),O=document.getElementById("currentFormula");function d(e){return A==="UAH"?`â‚´${(e*h).toFixed(2)}`:A==="EUR"?`â‚¬${(e/E).toFixed(2)}`:`$${e.toFixed(2)}`}function q(e){return e===0?0:B[u].calculate(e,p,f)}function y(e){const t=q(e),a=e*t,n=m+a;return{total:n,processingCost:a,rate:t,avgPerMinute:e>0?n/e:0}}function N(){const e=s/5e3*100;I.style.setProperty("--slider-progress",e+"%")}function l(){const{total:e,processingCost:t,rate:a,avgPerMinute:n}=y(s);U.textContent=`${s} Ñ…Ð²Ð¸Ð»Ð¸Ð½`,$.textContent=d(e),T.textContent=d(m),k.textContent=d(t),M.textContent=d(a)+"/Ñ…Ð²",H.textContent=s>0?d(n)+"/Ñ…Ð²":d(0)+"/Ñ…Ð²";const r=B[u];O.textContent=`${r.name}: ${r.equation}`,N(),x()}function L(){const e=B[u],t=document.getElementById("paramASlider"),a=document.getElementById("paramBSlider"),n=document.getElementById("paramALabel"),r=document.getElementById("paramBLabel");t.min=e.params.A.min,t.max=e.params.A.max,t.step=e.params.A.step,t.value=p,a.min=e.params.B.min,a.max=e.params.B.max,a.step=e.params.B.step,a.value=f,n.innerHTML=`ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ A: <span id="paramAValue">${p.toFixed(e.params.A.step<.1?2:1)}</span>`,r.innerHTML=`ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ B: <span id="paramBValue">${f.toFixed(5)}</span>`}function _(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?{primary:"#4fd1c9",text:"#f7fafc",border:"#4a5568"}:{primary:"#2185d0",text:"#1a202c",border:"#cbd5e0"}}function D(){const e=document.getElementById("priceChart");if(!e)return;const t=[];for(let n=0;n<=5e3;n+=50){const r=y(n);t.push({x:n,y:r.total})}const a=_();i=new Chart(e,{type:"line",data:{datasets:[{label:"Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð° Ñ†Ñ–Ð½Ð°",data:t,borderColor:a.primary,backgroundColor:a.primary+"20",borderWidth:2,pointRadius:0,tension:.4,fill:!0},{label:"ÐŸÐ¾Ñ‚Ð¾Ñ‡Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ñ–Ñ",data:[{x:s,y:y(s).total}],borderColor:"#e67e22",backgroundColor:"#e67e22",pointRadius:8,pointHoverRadius:10,showLine:!1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,labels:{color:a.text,font:{size:12,family:"var(--font-family-base)"},usePointStyle:!0,padding:20}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:a.primary,borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:function(n){return`Ð¢Ñ€Ð¸Ð²Ð°Ð»Ñ–ÑÑ‚ÑŒ: ${n[0].parsed.x} Ñ…Ð²Ð¸Ð»Ð¸Ð½`},label:function(n){const r=n.parsed.y;return n.datasetIndex===0?`Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð° Ñ†Ñ–Ð½Ð°: ${d(r)}`:`ÐŸÐ¾Ñ‚Ð¾Ñ‡Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ñ–Ñ: ${d(r)}`}}}},scales:{x:{type:"linear",title:{display:!0,text:"Ð¥Ð²Ð¸Ð»Ð¸Ð½Ð¸ Ð°ÑƒÐ´Ñ–Ð¾",color:a.text,font:{size:14,weight:"500",family:"var(--font-family-base)"}},grid:{color:a.border+"40",drawBorder:!1},ticks:{color:a.text,font:{size:12,family:"var(--font-family-base)"},callback:function(n){return n+" Ñ…Ð²"}}},y:{title:{display:!0,text:"Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð° Ñ†Ñ–Ð½Ð°",color:a.text,font:{size:14,weight:"500",family:"var(--font-family-base)"}},grid:{color:a.border+"40",drawBorder:!1},ticks:{color:a.text,font:{size:12,family:"var(--font-family-base)"},callback:function(n){return d(n)}}}},elements:{point:{hoverRadius:8,hoverBorderWidth:2}}}})}function V(){if(i){const e=y(s);i.data.datasets[1].data=[{x:s,y:e.total}],i.update("none")}}function z(){if(i){const e=[];for(let a=0;a<=5e3;a+=50){const n=y(a);e.push({x:a,y:n.total})}i.data.datasets[0].data=e;const t=y(s);i.data.datasets[1].data=[{x:s,y:t.total}],i.update()}}function x(e=!1){try{e?z():V()}catch(t){console.error("Chart update error:",t)}}async function v(){const e=document.getElementById("refreshRateBtn"),t=document.getElementById("exchangeRateDisplay"),a=document.getElementById("rateTimestamp");e.classList.add("loading"),a.textContent="ÐžÐ½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ...";for(const n of S)try{const r=await fetch(n);if(!r.ok)throw new Error("API request failed");const o=await r.json(),c=o.rates?.UAH||o.rates?.uah,g=o.rates?.EUR||o.rates?.eur;if(c&&c>0&&(h=c),g&&g>0&&(E=g),c&&c>0||g&&g>0){F=new Date,t.textContent=`1 USD = ${h.toFixed(2)} UAH | â‚¬${E.toFixed(2)}`,a.textContent=`ÐžÑÑ‚Ð°Ð½Ð½Ñ” Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ: ${F.toLocaleTimeString("uk-UA")}`,e.classList.remove("loading"),l(),b&&clearInterval(b),b=setInterval(v,P);return}}catch(r){console.error(`Failed to fetch from ${n}:`,r)}h=R,E=w,t.textContent=`1 USD = ${h.toFixed(2)} UAH | â‚¬${E.toFixed(2)}`,a.textContent="Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ñ‚ÑŒÑÑ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð¸Ð¹ ÐºÑƒÑ€Ñ",e.classList.remove("loading"),l()}function j(){I.addEventListener("input",e=>{s=parseInt(e.target.value),l()}),document.getElementById("refreshRateBtn").addEventListener("click",v),document.querySelectorAll(".preset-btn[data-minutes]").forEach(e=>{e.addEventListener("click",()=>{s=parseInt(e.dataset.minutes),I.value=s,l()})}),document.getElementById("formulaType").addEventListener("change",e=>{u=e.target.value;const t=B[u];p=t.params.A.default,f=t.params.B.default,L(),l(),x(!0)}),document.getElementById("baseFeeSlider").addEventListener("input",e=>{m=parseInt(e.target.value),document.getElementById("baseFeeValue").textContent=m,l()}),document.getElementById("paramASlider").addEventListener("input",e=>{p=parseFloat(e.target.value);const t=B[u];document.getElementById("paramAValue").textContent=p.toFixed(t.params.A.step<.1?2:1),l(),x(!0)}),document.getElementById("paramBSlider").addEventListener("input",e=>{f=parseFloat(e.target.value),document.getElementById("paramBValue").textContent=f.toFixed(5),l(),x(!0)}),document.getElementById("resetBtn").addEventListener("click",()=>{m=C.baseFee,u=C.formula,p=C.paramA,f=C.paramB,document.getElementById("baseFeeSlider").value=m,document.getElementById("baseFeeValue").textContent=m,document.getElementById("formulaType").value=u,L(),l(),x(!0)}),document.querySelectorAll(".currency-btn").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".currency-btn").forEach(t=>t.classList.remove("active")),e.classList.add("active"),A=e.dataset.currency,l()})})}function K(){const e={chart:!!i,domElements:!!document.getElementById("priceChart"),calculations:typeof y=="function",api:typeof v=="function"};return console.log("ðŸ” Health Check Results:",e),Object.values(e).every(a=>a)?console.log("âœ… All systems operational"):console.warn("âš ï¸ Some systems may have issues"),e}function W(){D(),L(),l(),v(),setTimeout(K,1e3)}function G(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{i&&(i.destroy(),D())})}function Y(){window.addEventListener("error",e=>{console.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason)})}document.addEventListener("DOMContentLoaded",()=>{j(),W(),G(),Y()});
